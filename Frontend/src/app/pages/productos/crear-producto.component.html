<div class="form-overlay">
  <div class="form-modal">
    <h2 class="form-title">Crear Producto</h2>
    <div class="divider"></div>

    <form [formGroup]="productoForm" (ngSubmit)="guardarProducto()">

      <div class="form-group">
        <label class="form-label">CÓDIGO</label>
        <input
          type="text"
          class="form-input"
          formControlName="codigo"
          placeholder="Ej: PROD001"
        />
        <span class="error-message" *ngIf="productoForm.get('codigo')?.invalid && productoForm.get('codigo')?.touched">
          El código es requerido (mínimo 3 caracteres)
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">NOMBRE</label>
        <input
          type="text"
          class="form-input"
          formControlName="nombre"
          placeholder="Ej: Laptop HP"
        />
        <span class="error-message" *ngIf="productoForm.get('nombre')?.invalid && productoForm.get('nombre')?.touched">
          El nombre es requerido (mínimo 3 caracteres)
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">CATEGORÍA</label>
        <select class="form-input" formControlName="categoriaId">
          <option [value]="0">Seleccione una categoría</option>
          <option *ngFor="let cat of categorias" [value]="cat.id">
            {{ cat.nombre }}
          </option>
        </select>
        <span class="error-message" *ngIf="productoForm.get('categoriaId')?.invalid && productoForm.get('categoriaId')?.touched">
          Debe seleccionar una categoría
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">PRECIO</label>
        <input
          type="number"
          class="form-input"
          formControlName="precio"
          placeholder="0.00"
          step="0.01"
          min="0"
        />
        <span class="error-message" *ngIf="productoForm.get('precio')?.invalid && productoForm.get('precio')?.touched">
          El precio debe ser mayor a 0
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">STOCK</label>
        <input
          type="number"
          class="form-input"
          formControlName="stock"
          placeholder="0"
          min="0"
        />
        <span class="error-message" *ngIf="productoForm.get('stock')?.invalid && productoForm.get('stock')?.touched">
          El stock no puede ser negativo
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">ESTADO</label>
        <select class="form-input" formControlName="estado">
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-guardar" [disabled]="loading || productoForm.invalid">
          {{ loading ? 'GUARDANDO...' : 'GUARDAR' }}
        </button>
        <button type="button" class="btn-cancelar" (click)="volver()" [disabled]="loading">
          CANCELAR
        </button>
      </div>

    </form>
  </div>
</div>
